<div class="register-root">
  <h1>注册</h1>
  <form class="register-form" [formGroup]="registerForm" (submit)="submitRegisterForm()">
    <div>
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>用户名</mat-label>
        <input matInput formControlName="userName" required>
        <mat-icon matSuffix *ngIf="userName?.dirty&&userName?.invalid" color="accent">highlight_off</mat-icon>
        <mat-icon matSuffix *ngIf="userName?.dirty&&userName?.valid" color="primary">check_circle_outline</mat-icon>
        <mat-error *ngIf="userName?.errors?.required">用户名不能为空</mat-error>
        <mat-error *ngIf="userName?.errors?.maxlength">
          用户名长度不能大于 {{userName?.errors?.maxlength.requiredLength}}.
        </mat-error>
        <mat-error *ngIf="userName?.errors?.verify">用户名已被占用</mat-error>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>密码</mat-label>
        <input matInput formControlName="password" required [type]="isPasswordHide ? 'password' : 'text'">
        <button mat-icon-button matPrefix tabindex="-1" (click)="isPasswordHide = !isPasswordHide" [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="isPasswordHide">
          <mat-icon>{{isPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-icon matSuffix *ngIf="password?.dirty&&password?.invalid" color="accent">highlight_off</mat-icon>
        <mat-icon matSuffix *ngIf="password?.dirty&&password?.valid" color="primary">check_circle_outline</mat-icon>
        <mat-error *ngIf="password?.errors?.valueFormat">密码必须有 6 ~ 64 个字符</mat-error>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>确认密码</mat-label>
        <input matInput formControlName="passwordConfirm" required [type]="isPasswordHide ? 'password' : 'text'">
        <button mat-icon-button matPrefix tabindex="-1" (click)="isPasswordHide = !isPasswordHide" [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="isPasswordHide">
          <mat-icon>{{isPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-icon matSuffix *ngIf="passwordConfirm?.dirty&&passwordConfirm?.invalid" color="accent">highlight_off</mat-icon>
        <mat-icon matSuffix *ngIf="passwordConfirm?.dirty&&passwordConfirm?.valid" color="primary">check_circle_outline</mat-icon>
        <mat-error>两次密码输入不一致</mat-error>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="w-50" appearance="outline">
        <mat-label>验证码</mat-label>
        <input matInput formControlName="captcha" required>
        <mat-icon matSuffix *ngIf="captcha?.dirty&&captcha?.invalid" color="accent">highlight_off</mat-icon>
        <mat-icon matSuffix *ngIf="captcha?.dirty&&captcha?.valid" color="primary">check_circle_outline</mat-icon>
        <mat-error *ngIf="captcha?.errors?.required">验证码不能为空</mat-error>
        <mat-error *ngIf="captcha?.errors?.verify">验证码错误</mat-error>
      </mat-form-field>
      <img class="captcha-img" [src]="captchaSrc" (click)="refreshCaptcha()" />
    </div>
    <div class="form-operations">
      <button mat-raised-button type="submit" color="primary">register</button>
      <mat-divider class="vertical-divider" [vertical]="true"></mat-divider>
      <span>已有账号？<a routerLink="../sign-in">前往登录</a></span>
    </div>
  </form>
</div>